% In this file you should put the actual content of the blueprint.
% It will be used both by the web and the print version.
% It should *not* include the \begin{document}
%
% If you want to split the blueprint content into several files then
% the current file can be a simple sequence of \input. Otherwise It
% can start with a \section or \chapter for instance.


% \section{Definitions}

% \begin{definition}[Sequence]
%   \label{def:sequence}
%   A sequence, denoted $a$ or $\{a_n\}$, is a function $a : ℕ → \mathbb{R}$.
% \end{definition}

% \begin{definition}[Convergence]
%   \label{def:convergence}
%   \lean{convergesTo, converges}
%   \leanok

%   A sequence $\{a_n\}$ converges to $L ∈ \mathbb{R}$ if for all $\varepsilon > 0$ there exists
%   $N ∈ ℕ$ such that for all $n ≥ N$, $|a_n - L| < \varepsilon$.
%   We say $\{a_n\}$ converges if there exists $L ∈ \mathbb{R}$ such that $\{a_n\}$ converges to $L$.

% \end{definition}

% \begin{definition}[Bounded Above]
%   \label{def:bounded_above}
%   \lean{upper_bound, bounded_above}
%   \leanok
%   A set $S \subseteq \mathbb{R}$ is bounded above if there exists an $M \in \mathbb{R}$ such that for all $s \in S$, $s \le M$.
%   We say that $M$ is an upper bound for $S$.
% \end{definition}

% \begin{definition}[supremum]
%   \label{def:supremum}
%   \uses{def:bounded_above}
%   \lean{sup}
%   \leanok
%   Let $S \subseteq \mathbb{R}$ be non-empty. We say that $y \in \mathbb{R}$ is the supremum of $S$ if \\ \\
%   (i) $y$ is an upper bound for $S$ \\
%   (ii) for any upper bound $z$ of $S$, $y \le z$
% \end{definition}

% \begin{definition}[continuous]
%   \label{def:continuous}
%   \lean{continuous}
%   \leanok
%   A function $f : \mathbb{R} → \mathbb{R}$ is continuous if for all $x \in \mathbb{R}$ and for all $\varepsilon > 0$, there exists a $\delta > 0$ such that for all $y ∈ \mathbb{R}$ with $|x - y| < \delta$, $|f(x) - f(y)| < \varepsilon$.
% \end{definition}


% \section{Theorems}


% \begin{theorem}[Limit Laws]
%   \label{thm:limit_laws}
%   \uses{def:convergence, def:sequence}
%   \lean{convergesTo_scalar_mul, convergesTo_add}
%   \leanok

%   Let $C \in \mathbb{R}$. Suppose $\{a_n\}$ converges to $L$ and $\{b_n\}$ converges to $K$. Then \\ \\
%   (i) $\{C a_n\}$ converges to $C L$ \\
%   (ii) $\{a_n + b_n\}$ converges to $L + K$ 

% \end{theorem}

% \begin{proof}
%   \leanok
%   Trivial.
% \end{proof}


% \begin{lemma}
% \label{lem:converges_nonneg}
%   \uses{def:convergence, thm:limit_laws}
%   \lean{convergesTo_nonneg}
%   \leanok

%   Suppose that there exists an $N \in ℕ$ such that for all $n \ge N$, $a_n ≥ 0$.
%   Then $\lim_{n \to \infty} a_n ≥ 0$.

% \end{lemma}

% \begin{theorem}[Order Limit Theorem]
%   \label{thm:order_limit}
%   \uses{lem:converges_nonneg}
%   \lean{le_convergesTo_of_le}
%   \leanok

%   Let $\{a_n\}$ and $\{b_n\}$ be sequences. 
%   Suppose that there exists an $N ∈ ℕ$ such that for all $n ≥ N$, $a_n ≤ b_n$.
%   Then $\lim_{n \to \infty} a_n \le \lim_{n \to \infty} b_n$.
% \end{theorem}

% \begin{theorem}[Completeness Axiom]
%   \label{thm:exists_sup_of_bounded_above}
%   \uses{def:supremum, def:bounded_above}
%   \lean{exists_sup_of_bounded_above}
%   \leanok
%   Let $S \subseteq \mathbb{R}$ be non-empty and bounded above.
%   Then there exists a $y \in \mathbb{R}$ such that $y$ is the supremum of $S$.

% \end{theorem}

% \begin{theorem}[Intermediate Value Theorem]
%   \label{thm:intermediate_value}
%   \uses{thm:exists_sup_of_bounded_above, def:continuous, thm:order_limit}
%   \lean{intermediate_value}
%   \leanok

%   Let $f : \mathbb{R} → \mathbb{R}$ be continuous and let $a < b ∈ \mathbb{R}$.
%   Suppose that $f(a) < f(b)$ and let $y \in [f(a), f(b)]$.
%   Then there exists a $c ∈ [a, b]$ such that $f(c) = y$.
% \end{theorem}

% \begin{proof}
%   \leanok
%   Sketch: \\
%   Let $K = \{x \in [a, b] | f(x) \le y\}$.
%   Then $K$ is non-empty and bounded above by $b$, so it has a supremum $c \in \mathbb{R}$.
%   If $f(c) < y$, then by continuity of $f$, there exists a $\delta > 0$ such that for all $x ∈ (c - \delta, c + \delta)$, $f(x) < y$.
%   Choose $x = c + \delta/2$.Then $x ∈ K$ and $x > c$, so $c$ is not an upper bound for $K$.
%   If $f(c) > y$, then by continuity of $f$, there exists a $\delta > 0$ such that for all $x ∈ (c - \delta, c + \delta)$, $f(x) > y$.
%   Choose $x = c - \delta/2$. Then $x$ is an upper bound for $K$ and $x < c$, so $c$ is not the supremum of $K$.
%   Thus, $f(c) = y$.

% \end{proof}

\section{Definitions}

\begin{definition} [Modular Form]
  \label{def:ModularForm}
  \lean{ModularFormDefs.Regular.ModularForm}
  \leanok
  In lean, A modular form of weight $k \in \mathbb{N}$ is a function $f : \mathbb{C} → \mathbb{C}$ such that : \\ \\
  (1) $f$ is holomorphic on $\mathbb{H}$ \\
  (2) For all $z \in \mathbb{H}, f(z + 1) = f(z)$ \\
  (3) For all $z \in \mathbb{H}, f(-1/z) = z^{k} f(z)$ \\
  (4) $f$ is bounded as Im$(z) \to \infty$ \\
\end{definition}

\begin{definition} [Integer Modular Form]
  \label{def:IntegerModularForm}
  \uses{def:ModularForm}
  \lean{ModularFormDefs.Integer.IntegerModularForm }
  \leanok
  An integer modular form of weight $k \in \mathbb{N}$ is a sequence $a : \mathbb{N} → \mathbb{Z}$
  such that $\sum_{n=0}^{\infty} a(n) q^n$ is a modular form of weight $k$, where $q = e ^ {2 \pi i z}.$
\end{definition}

\begin{definition} [ModularFormMod $\ell$]
  \label{def:ModularFormMod}
  \uses{def:IntegerModularForm}
  \lean{Modulo2.ModularFormMod}
  \leanok
  A modular form mod $\ell$ of weight $k \in \mathbb{Z} / (\ell - 1) \mathbb{Z}$ is a sequence $a : \mathbb{N} → \mathbb{Z} / \ell \mathbb{Z}$
  such that there exists an integer modular form $b$ of weight $k'$ where
  $b \equiv a \mod \ell$ and $k' \equiv k \mod (\ell - 1)$.
\end{definition}


\begin{definition} [Theta]
  \label{def:Theta}
  \uses{def:ModularFormMod}
  \lean{Theta}
  \leanok
  $\Theta$ sends modular forms mod $\ell$ of weight $k$ to weight $k + 2$ by \\
  $(\Theta a) n = n a(n).$

\end{definition}

\begin{definition} [U Operator]
  \label{def:U_Operator}
  \uses{def:ModularFormMod}
  \lean{U_Operator}
  \leanok
  The operator $U$ sends modular forms mod $\ell$ of weight $k$ to weight $k$ by \\
  $ (a|U) n = a(\ell n).$
\end{definition}

\begin{definition} [hasWeight]
  \label{def:hasWeight}
  \uses{def:ModularFormMod}
  \lean{hasWeight}
  \leanok
  A modular form mod $\ell$ called $a$ has weight $j \in \mathbb{N}$ if
  there exists an integer modular form $b$ of weight $j$ such that $b \equiv a \mod \ell$.
\end{definition}

\begin{definition} [Filtration]
  \label{def:Filtration}
  \uses{def:ModularFormMod, def:hasWeight}
  \lean{Filtration}
  \leanok
  Let a be a of a modular form mod $\ell$. The filtration of $a, \omega (a), $ 
  is defined as the minimum natural number $j$ such that $a$ has weight $j$. 
  The filtration of the zero function is $0$.
\end{definition}

\begin{definition} [multiplication and exponentiation]
  \label{def:mulpow}
  \uses{def:ModularFormMod}
  \lean{Modulo2.mul, Modulo2.pow}
  \leanok
  It's worth stated how multiplication and exponentiation are defined here, because they are not defined in the normal way.
  The multiplication of two modular forms mod $\ell$ called $a$ and $b$ is defined as 
  \[(a \cdot b) n = \sum_{x + y = n} a(x) b(y).\] 
  The exponentiation of a modular form mod $\ell$ called $a$ to the power of $j \in \mathbb{N}$ is defined as 
  \[(a^j) n = \sum_ {x_1 + ... + x_j = n} \prod_{i = 1}^j a (x_i).\]
\end{definition}


\section{PowPrime}


\begin{definition} [permutational equivalence]
  \label{def:perm_equiv}
  \lean{perm_equiv}
  \leanok
  Two functions $a, b : $ Fin $n \to \mathbb{N}$, which can be thought of as tuples of n natural numbers,
  are permutationally equivalent if there exists a bijective function $\sigma : $ Fin $n \to $ Fin $n$ such that 
  $a = b \circ \sigma$. This is an equivalence relation. 
\end{definition}

\begin{lemma}
  \label{lem:non_diag_vanish}
  \uses{def:perm_equiv}
  \lean{non_diag_vanish}
  \leanok
  If $x = (x_1, x_2, ..., x_k)$ is not constant (i.e not all $x_i$ are equal) then for any $n \in \mathbb{N}$,
  \[ k \mid \# \{y = (y_1, y_2, ..., y_k) : \sum_{i = 1}^k y_i = n \text{   and $x$ and $y$ are permutationally equivalent} \} \]
\end{lemma}
\begin{proof}
  \leanok
\end{proof}

\begin{lemma}
  \label{lem:Pi_eq_of_perm_equiv}
  \uses{def:perm_equiv}
  \lean{Pi_eq_of_perm_equiv}
  \leanok
  If $x$ and $y$ are permutationally equivalent then $\prod_{i = 1}^k a(x_i) = \prod_{i = 1}^k a(y_i)$.
\end{lemma}
\begin{proof}
  \leanok
\end{proof}

\begin{lemma}
  \label{lem:non_const_of_tuple}
  \lean{non_const_of_tuple_non_diag, non_const_of_tuple_diag}
  \leanok
  Let $x = (x_1, x_2, ..., x_k)$ and $n \in \mathbb{N}$. Suppose that $\sum_{i = 1}^k x_i = n$. \\
  (1) If $k \nmid n$ then $x$ is not constant. \\
  (2) If $k \mid n$ and $x \neq (n/k, ..., n/k)$ then $x$ is not constant.
\end{lemma}
\begin{proof}
  \leanok
\end{proof}

\begin{theorem}[Pow Prime] 
  \label{thm:Pow_Prime}
  \uses{def:mulpow, lem:non_diag_vanish, lem:Pi_eq_of_perm_equiv, lem:non_const_of_tuple}
  \lean{Pow_Prime}
  \leanok
  Let $\ell$ be a prime and $a$ a modular form mod $\ell$ of any weight. Then \\
  \[(a ^ \ell) n = \begin{cases} a (n / \ell) & \text{if $\ell \mid n$} \\
    0 & \text{otherwise} \end{cases} \]
\end{theorem}
\begin{proof}
  \leanok
\end{proof}



\section{Theorems}

\begin{theorem}
  \label{thm:U_pow_l_eq_self_sub_Theta_pow_l_sub_one}
  \uses{thm:Pow_Prime, def:U_Operator, def:Theta}
  \lean{U_pow_l_eq_self_sub_Theta_pow_l_sub_one}
  \leanok
  Let $a$ be a modular form mod $\ell$. Then $(a|U) ^ \ell = a - \Theta^{\ell - 1} a$.
\end{theorem}
\begin{proof}
  \leanok
\end{proof}


\begin{lemma}
  \label{lem:const_of_Filt_zero}
  \uses{def:Filtration} 
  \lean{const_of_Filt_zero}
  \leanok
  Let a be a modular form mod $\ell$. If $\omega (a) = 0$ then $a$ is constant, 
  i.e. for all $n > 0, a(n) = 0$.
\end{lemma}

\begin{theorem}
  \label{thm:Filtration_Log}
  \uses{def:Filtration, lem:const_of_Filt_zero, def:mulpow}
  \lean{Filtration_Log}
  \leanok
  Let a be a modular form mod $\ell$ and $i \in \mathbb{N}$. 
  Then $\omega (a ^ i)$ = $i \omega (a)$.
\end{theorem}

\begin{theorem}
  \label{thm:Filtration_congruence}
  \uses{def:Filtration}
  \lean{Filtration_congruence}
  \leanok
  Let a be a modular form mod $\ell$ of weight $k$. Then 
  $(\omega (a) \equiv k \mod (\ell - 1)$. 
\end{theorem}


\begin{definition}[Delta]
  \label{def:Delta}
  \uses{def:ModularFormMod}
  \lean{Delta}
  \leanok
  
  $\Delta$ is the sequence obtained from $q (\prod_{n = 1}^{\infty} (1 - q^n))^{24}$.
  It is a modular form mod $\ell$ of weight $12$. 
\end{definition}

\begin{definition}
  \label{def:f_l}
  \uses{def:Delta}
  \lean{f}
  \leanok
  For a prime $\ell \ge 5$, we define $\delta_\ell = \frac{\ell^2 - 1}{24} \in \mathbb{N}$. 
  We define $f_\ell = \Delta^{\delta_\ell}$, which is a modular form mod $\ell$ of weight $12 \delta_\ell$. 
\end{definition}

\begin{lemma}
  \label{lem:Filt_fl}
  \uses{thm:Filtration_Log, def:f_l}
  \lean{Filt_fl}
  \leanok
  $ \omega (f_\ell) = 12 \delta_\ell = \frac{\ell^2 - 1}{2}.$
\end{lemma}

\begin{theorem}
  \label{thm:Filt_Theta_bound}
  \uses{def:Theta}
  \lean{Filt_Theta_bound}
  \leanok
  This is part (1) of Lemma 2.1. \\
  Let $a$ be a modular form mod $\ell$. Then $\omega (\Theta a) \le \omega (a) + \ell + 1$.
\end{theorem}

\begin{theorem}
  \label{thm:Filt_Theta_iff}
  \uses{thm:Filt_Theta_bound}
  \lean{Filt_Theta_iff}
  \leanok
  This is part (2) of Lemma 2.1. \\
  Let $a$ be a modular form mod $\ell$. Then $\omega (\Theta a) = \omega (a) + \ell + 1$ 
  if and only if $\ell \nmid \omega (a).$
\end{theorem}

\begin{theorem}
  \label{thm:le_Filt_Theta_fl}
  \uses{def:f_l, def:Filtration}
  \lean{le_Filt_Theta_fl}
  \leanok
  This is Lemma 3.2. \\
  For all $m \in \mathbb{N}$, $\omega (\Theta^m f_\ell) \ge \omega (f_\ell) = \frac{\ell^2 - 1}{2}.$
\end{theorem} 


\begin{theorem}
  \label{thm:Filt_Theta_pow_l_sub_one} 
  \uses{lem:Filt_fl, thm:Filt_Theta_iff}
  \lean{Filt_Theta_pow_l_sub_one}
  \leanok
  This is part (1) of Lemma 3.3. \\
  If $\ell \nmid \omega (\Theta^{\ell - 1} f_\ell)$ then 
  $\omega (\Theta^{\ell - 1} f_\ell) = \frac{\ell^2 - 1}{2}.$
\end{theorem}
\begin{proof}
  \leanok
\end{proof}


\begin{theorem}
  \label{thm:Filt_U_pos}
  \uses{lem:Filt_fl, thm:Filtration_Log, lem:const_of_Filt_zero, thm:U_pow_l_eq_self_sub_Theta_pow_l_sub_one}
  \lean{Filt_U_pos}
  \leanok
  This is part (2) of Lemma 3.3. \\
  If $\ell \mid \omega (\Theta^{\ell - 1} f_\ell)$ then 
  $\omega (f_\ell | U) > 0$.
\end{theorem}
\begin{proof}
  \leanok
\end{proof}


\begin{lemma}
  \label{lem:Filt_Theta_congruence_of_div} 
  \uses{thm:Filtration_congruence, thm:Filt_Theta_bound, thm:Filt_Theta_iff}
  \lean{Filt_Theta_congruence_of_div}
  \leanok
  Let $a$ be a modular form mod $\ell$. If $\ell \mid \omega (a)$ then
  there exists an $\alpha \in \mathbb{N}$ such that 
  $\omega (\Theta a) = \omega (a) + \ell + 1 - (\alpha + 1) (\ell - 1)$.
\end{lemma}
\begin{proof}
  \leanok
\end{proof}


\begin{theorem}
  \label{thm:Filt_Theta_l_sub_two}
  \uses{thm:Filt_Theta_pow_l_sub_one, thm:Filt_U_pos, lem:Filt_fl, thm:le_Filt_Theta_fl}
  \lean{Filt_Theta_l_sub_two}
  \leanok
  If $(f_\ell | U) = 0$ then $\ell \mid \omega (\Theta^{\ell - 2} f_\ell)$.
\end{theorem}
\begin{proof}
  \leanok
\end{proof}


\begin{lemma}
  \label{lem:Filt_Theta_lel_add_one_div_two}
  \uses{thm:Filt_Theta_iff, lem:Filt_fl}
  \lean{Filt_Theta_lel_add_one_div_two}
  \leanok
  For all $m \in \mathbb{N}$ with $m \le \frac{\ell + 1}{2}$,
  $\omega (\Theta^m f_\ell) = \frac{\ell^2 - 1}{2} + m (\ell + 1)$.
\end{lemma}
\begin{proof}
  \leanok
  Induction.
\end{proof}


\begin{theorem}
  \label{thm:Filt_Theta_l_add_one_div_two}
  \uses{lem:Filt_Theta_lel_add_one_div_two}
  \lean{Filt_Theta_l_add_one_div_two}
  \leanok
  $\ell \mid \omega (\Theta^{\frac{\ell + 1}{2}} f_\ell)$.
\end{theorem}
\begin{proof}
  \leanok
\end{proof}


\begin{definition}
  \label{def:alpha}
  \uses{lem:Filt_Theta_lel_add_one_div_two, lem:Filt_Theta_congruence_of_div, thm:Filt_Theta_l_add_one_div_two}
  \lean{Final.Hidden.alpha}
  \leanok
  We define $\alpha$ to be the natural number such that 
  $\omega (\Theta^{\frac{\ell + 3}{2}} f_\ell) = \frac{\ell^2 - 1}{2} + \frac{\ell + 3}{2} (\ell + 1) - (\alpha + 1) (\ell - 1)$. \\
  Such an $\alpha$ exists, because 
  $\ell \mid \omega (\Theta^{\frac{\ell + 1}{2}} f_\ell) = \frac{\ell^2 - 1}{2} + \frac{\ell + 1}{2} (\ell + 1)$.
\end{definition}

\begin{definition}
  \label{def:j} 
  \uses{thm:Filt_Theta_l_sub_two}
  \lean{Final.Hidden.j}
  \leanok
  We define $j$ to be the least natural number such that
  $\ell \mid \omega (\Theta^{\frac{\ell + 3}{2} + j} f_\ell).$
  Such a $j$ exists, because $\ell \mid \omega (\Theta^{\ell - 2} f_\ell).$ \\ \\
  Note : This definition requires that $(f_\ell | U) = 0.$ We will assume this fact from now on.
\end{definition}


\begin{lemma}
  \label{lem:alpha_bound}
  \uses{def:alpha, thm:le_Filt_Theta_fl}
  \lean{Final.Hidden.alpha_bound}
  \leanok
  $\alpha \le \frac{\ell + 3}{2}$.
\end{lemma}
\begin{proof}
  \leanok
\end{proof}

\begin{lemma}
  \label{lem:j_bound}
  \uses{def:j, thm:Filt_Theta_l_sub_two}
  \lean{Final.Hidden.j_bound}
  \leanok
  $j \le \frac{\ell - 7}{2}$.
\end{lemma}
\begin{proof}
  \leanok
\end{proof}

\begin{lemma}
  \label{lem:Filt_Theta_lej}
  \uses{def:alpha, def:j, thm:Filt_Theta_iff, lem:alpha_bound}
  \lean{Final.Hidden.Filt_Theta_lej}
  \leanok
  For all $m \le j$, 
  $\omega (\Theta^{\frac{\ell + 3}{2} + m} f_\ell) = 
    \frac{\ell^2 - 1}{2} + (\frac{\ell + 3}{2} + m) (\ell + 1) - (\alpha + 1) (\ell - 1).$
\end{lemma}
\begin{proof}
  \leanok
\end{proof}


\begin{lemma}
  \label{lem:ldiv_j_add_a}
  \uses{lem:Filt_Theta_lej}
  \lean{Final.Hidden.ldiv_j_add_a}
  \leanok
  $\ell \mid (j + 1) + (\alpha + 1)$. 
\end{lemma}
\begin{proof}
  \leanok
\end{proof}

\begin{lemma}
  \label{lem:alpha_equal}
  \uses{lem:ldiv_j_add_a, lem:alpha_bound, lem:j_bound}
  \lean{Final.Hidden.alpha_equal}
  \leanok
  $\alpha + 1 = \frac{\ell + 5}{2}$.
\end{lemma}
\begin{proof}
  \leanok
\end{proof}

\begin{theorem}
  \label{thm:Filt_Theta_l_add_three_div_two}
  \uses{lem:alpha_equal}
  \lean{Filt_Theta_l_add_three_div_two}
  \leanok
  $ \omega (\Theta^{\frac{\ell + 3}{2}} f_\ell)= \frac{\ell^2 - 1}{2} + 4 $.

\end{theorem}
\begin{proof}
  \leanok
\end{proof}
